// Use DBML to define your database structure
// Docs: https://dbml.dbdiagram.io/docs
// database bduq

// implemented
Table doente {
  id int [pk]
  numero_processo int [not null, unique]
  nome varchar
  data_nascimento date
  sexo enum [note: "('Masculino', 'Feminino', 'Outro')"]
  morada varchar
  created_at datetime
  last_modified datetime
}

// implemented
Table internamento {
  id int [pk]
  numero_internamento int [not null, unique]
  doente_id int [not null]
  data_entrada date
  data_alta date
  data_queimadura date
  origem_entrada int
  destino_alta int
  ASCQ_total int
  lesao_inalatoria enum
  mecanismo_queimadura int
  agente_queimadura int
  tipo_acidente int
  incendio_florestal bool
  contexto_violento enum
  suicidio_tentativa bool
  fogueira_queda bool
  lareira_queda bool
  escarotomias_entrada bool
  intubacao_OT enum
  VMI_dias int
  VNI bool

}

// implemented
Table tipoAcidente {
  id int [pk]
  acidente varchar
  tipo_acidente varchar
}

// implemented
Table agenteQueimadura {
  id int [pk]
  agente_queimadura varchar
  nota varchar
}
// implemented
Table mecanismoQueimadura {
  id int [pk]
  mecanismo_queimadura varchar
  nota varchar
}
// implemented
Table origemDestino {
  id int [pk]
  local varchar [not null]
  int_ext enum [note: "('Interno', 'Externo', 'Outro')"]
  descricao varchar
}
// implemented
Table queimadura {
  id int [pk]
  internamento_id int [not null]
  local_anatomico int
  grau_maximo enum
  notas varchar
}
// implemented
Table localAnatomico {
  id int [pk]
  local_anatomico varchar
  regiao_anatomica varchar
}
// implemented
Table trauma {
  id int [pk]
  internamento_id int [not null]
  tipo_local int
  cirurgia_urgente bool
}
// implemented
Table traumaTipo {
  id int [pk]
  local varchar
  tipo varchar
}
// implemented
Table infecao {
  id int [pk]
  internamento_id int [not null]
  agente int
  local_tipo_infecao int
  nota varchar
}
// implemented
Table agenteInfeccioso {
  id int [pk]
  nome varchar
  tipo_agente varchar
}
// implemented
Table tipoInfeccao {
  id int [pk]
  tipo_infeccao varchar
  local varchar
}
// implemented
Table antibiotico {
  id int [pk]
  nome_antibiotico varchar
  classe_antibiotico varchar
  codigo varchar  
}
// implemented
Table indicacaoAntibiotico {
  id int [pk]
  indicacao varchar
}
// implemented
Table Internamento_Antibiotico {
  id int [pk]
  internamento_id int [not null]
  antibiotico int
  indicacao int
}

Table Internamento_Procedimento {
  id int [pk]
  internamento_id int [not null]
  procedimento int
}

Table procedimento {
  id int [pk]
  nome_procedimento varchar
  tipo_procedimento varchar
}

Table Doente_Patologia {
  id int [pk]
  doente_id int [not null]
  patologia int
  nota varchar
}

Table patologia {
  id int [pk]
  nome_patologia varchar
  classe_patologia varchar
  codigo varchar
}

Table Doente_Medicacao {
  id int [pk]
  doente_id int [not null]
  medicacao int
  nota varchar
}

Table medicacao {
  id int [pk]
  nome_medicacao varchar
  classe_terapeutica varchar
  codigo varchar
}


Ref: "doente"."id" < "internamento"."doente_id"

Ref: "origemDestino"."id" < "internamento"."origem_entrada"

Ref: "origemDestino"."id" < "internamento"."destino_alta"

Ref: "internamento"."id" < "queimadura"."internamento_id"

Ref: "internamento"."id" < "trauma"."internamento_id"

Ref: "internamento"."id" < "infecao"."internamento_id"

Ref: "internamento"."id" < "Internamento_Antibiotico"."internamento_id"

Ref: "internamento"."id" < "Internamento_Procedimento"."internamento_id"

Ref: "doente"."id" < "Doente_Patologia"."doente_id"

Ref: "doente"."id" < "Doente_Medicacao"."doente_id"

Ref: "mecanismoQueimadura"."id" < "internamento"."mecanismo_queimadura"

Ref: "agenteQueimadura"."id" < "internamento"."agente_queimadura"

Ref: "procedimento"."id" < "Internamento_Procedimento"."procedimento"

Ref: "tipoAcidente"."id" < "internamento"."tipo_acidente"

Ref: "medicacao"."id" < "Doente_Medicacao"."medicacao"

Ref: "localAnatomico"."id" < "queimaduras"."local_anatomico"

Ref: "traumaTipo"."id" < "trauma"."tipo_local"

Ref: "agenteInfeccioso"."id" < "infecao"."agente"

Ref: "tipoInfeccao"."id" < "infecao"."local_tipo_infecao"

Ref: "antibiotico"."id" < "Internamento_Antibiotico"."antibiotico"

Ref: "indicacaoAntibiotico"."id" < "Internamento_Antibiotico"."indicacao"

Ref: "patologia"."id" < "Doente_Patologia"."patologia"